# å°ç±³è·¯ç”±å™¨ç ´è§£å·¥å…· (XMiR-Patcher)

[![Download latest](https://img.shields.io/badge/ğŸ¡‡-ä¸‹è½½æœ€æ–°ç‰ˆæœ¬-green)](https://github.com/longzheng268/Xiaomi-Router-patcher/archive/refs/heads/main.zip)
[![ViewCount](https://views.whatilearened.today/views/github/openwrt-xiaomi/xmir-patcher.svg)](https://github.com/longzheng268/Xiaomi-Router-patcher/archive/refs/heads/main.zip)

ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„å°ç±³è·¯ç”±å™¨å›ºä»¶ç ´è§£å·¥å…·ï¼Œæ”¯æŒå¤šç§å°ç±³è·¯ç”±å™¨å‹å·çš„æ¼æ´åˆ©ç”¨ã€SSHå¯ç”¨ã€è¯­è¨€åŒ…å®‰è£…ã€å›ºä»¶åˆ·å†™ç­‰åŠŸèƒ½ã€‚

## ğŸ“‹ ç›®å½•

- [æ”¯æŒçš„è®¾å¤‡](#æ”¯æŒçš„è®¾å¤‡)
- [åŠŸèƒ½ç‰¹æ€§](#åŠŸèƒ½ç‰¹æ€§)
- [å®‰è£…æ•™ç¨‹](#å®‰è£…æ•™ç¨‹)
- [ä½¿ç”¨æŒ‡å—](#ä½¿ç”¨æŒ‡å—)
- [è¯¦ç»†åŠŸèƒ½è¯´æ˜](#è¯¦ç»†åŠŸèƒ½è¯´æ˜)
- [æ•…éšœæ’é™¤](#æ•…éšœæ’é™¤)
- [å®‰å…¨æç¤º](#å®‰å…¨æç¤º)
- [å¼€å‘è¯´æ˜](#å¼€å‘è¯´æ˜)
- [è´¡çŒ®æŒ‡å—](#è´¡çŒ®æŒ‡å—)

## ğŸ”§ æ”¯æŒçš„è®¾å¤‡

### å®Œå…¨æ”¯æŒçš„å‹å·
æœ¬å·¥å…·æ”¯æŒä»¥ä¸‹å°ç±³è·¯ç”±å™¨å‹å·ï¼ˆæŒ‰å‹å·IDæ’åºï¼‰ï¼š

#### ç¬¬ä¸€ä»£ç³»åˆ—
- **R1CM** (miwifi-mini) - å°ç±³è·¯ç”±å™¨ Mini
- **R1CL** (miwifi-nano) - å°ç±³è·¯ç”±å™¨ Nano
- **R2D** - å°ç±³è·¯ç”±å™¨ 2
- **R2CM** - å°ç±³è·¯ç”±å™¨ 2

#### ç¬¬ä¸‰ä»£ç³»åˆ—  
- **R3** - å°ç±³è·¯ç”±å™¨ 3
- **R3D** (r3d) - å°ç±³è·¯ç”±å™¨ 3D
- **R3L** (miwifi-3c) - å°ç±³è·¯ç”±å™¨ 3C
- **R3P** (mi-router-3-pro) - å°ç±³è·¯ç”±å™¨ 3 Pro
- **R3A** - å°ç±³è·¯ç”±å™¨ 3A
- **R3G** (mi-router-3g) - å°ç±³è·¯ç”±å™¨ 3G
- **R3GV2** (mi-router-3g-v2) - å°ç±³è·¯ç”±å™¨ 3G V2

#### ç¬¬å››ä»£ç³»åˆ—
- **R4** (mi-router-4) - å°ç±³è·¯ç”±å™¨ 4
- **R4C** (mi-router-4q) - å°ç±³è·¯ç”±å™¨ 4Q
- **R4A** (mi-router-4a-gigabit) - å°ç±³è·¯ç”±å™¨ 4A åƒå…†ç‰ˆ
- **R4CM** (mi-router-4c) - å°ç±³è·¯ç”±å™¨ 4C
- **R4AC** (mi-router-4a-100m) - å°ç±³è·¯ç”±å™¨ 4A ç™¾å…†ç‰ˆ

#### ACç³»åˆ—
- **R2100** (mi-router-ac2100) - å°ç±³è·¯ç”±å™¨ AC2100
- **RM2100** (redmi-router-ac2100) - çº¢ç±³è·¯ç”±å™¨ AC2100
- **R2200** - å°ç±³è·¯ç”±å™¨ AC2200
- **R2350** (aiot-ac2350) - å°ç±³ AIoT è·¯ç”±å™¨ AC2350
- **R2600** - å°ç±³è·¯ç”±å™¨ AC2600

#### AXç³»åˆ— (Wi-Fi 6)
- **R3600** (ax3600) - å°ç±³è·¯ç”±å™¨ AX3600
- **R1350** - å°ç±³è·¯ç”±å™¨ AX1350
- **RA67** - çº¢ç±³è·¯ç”±å™¨ AX1800C
- **RA69** (ax6) - å°ç±³è·¯ç”±å™¨ AX6
- **RA70** (ax9000) - å°ç±³è·¯ç”±å™¨ AX9000
- **RA71** - çº¢ç±³è·¯ç”±å™¨ AX1800
- **RA72** - å°ç±³è·¯ç”±å™¨ AX6000
- **RA75** (mi-ra75) - å°ç±³è·¯ç”±å™¨ RA75
- **RA80/RA82** - å°ç±³è·¯ç”±å™¨ AX3000

#### BEç³»åˆ— (Wi-Fi 6E/7)
- **RD15/RN06** - å°ç±³è·¯ç”±å™¨ BE3600 2.5G âš ï¸ **éœ€è¦ç‰¹æ®Šå¤„ç†**
- **RD08** - å°ç±³è·¯ç”±å™¨ BE6500 Pro
- **RD16** - å°ç±³è·¯ç”±å™¨ BE3600 1G
- **RD18** - å°ç±³è·¯ç”±å™¨ BE5000

> **âš ï¸ æ³¨æ„**: BEç³»åˆ—è®¾å¤‡ä½¿ç”¨ hackCheck=3 é«˜çº§å®‰å…¨æœºåˆ¶ï¼Œå·¥å…·å·²å†…ç½®ç»•è¿‡æŠ€æœ¯

#### ä¼ä¸šçº§ç³»åˆ—
- **CR6006** (mi-router-cr6606) - å°ç±³ä¼ä¸šè·¯ç”±å™¨ CR6606
- **CR6008** (mi-router-cr6608) - å°ç±³ä¼ä¸šè·¯ç”±å™¨ CR6608  
- **CR6009** (mi-router-cr6609) - å°ç±³ä¼ä¸šè·¯ç”±å™¨ CR6609

#### TRç³»åˆ—
- **TR608** - å°ç±³è·¯ç”±å™¨ TR608
- **TR609** - å°ç±³è·¯ç”±å™¨ TR609

#### å…¶ä»–å‹å·
- **P01** - å°ç±³éšèº«è·¯ç”±å™¨
- **D01** - å°ç±³è·¯ç”±å™¨ HD
- **IR1200G** - å°ç±³è·¯ç”±å™¨ 1200G
- **RM1800** - çº¢ç±³è·¯ç”±å™¨ 1800
- **R2100D** - å°ç±³è·¯ç”±å™¨ AC2100D
- **RA50** - å°ç±³è·¯ç”±å™¨ RA50

> **æ³¨æ„**: ä¸åŒå‹å·æ”¯æŒçš„åŠŸèƒ½å¯èƒ½æœ‰å·®å¼‚ï¼Œå»ºè®®åœ¨æ“ä½œå‰ä»”ç»†é˜…è¯»ç›¸å…³è¯´æ˜ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½
- ğŸ”“ **æ¼æ´åˆ©ç”¨**: è‡ªåŠ¨æ£€æµ‹å¹¶åˆ©ç”¨å°ç±³è·¯ç”±å™¨çš„å·²çŸ¥æ¼æ´
- ğŸ”‘ **SSHå¯ç”¨**: æ°¸ä¹…å¯ç”¨SSHè®¿é—®ï¼Œæ–¹ä¾¿é«˜çº§ç”¨æˆ·ç®¡ç†
- ğŸŒ **å¤šè¯­è¨€æ”¯æŒ**: å®‰è£…è‹±æ–‡/ä¿„æ–‡/ä¸­æ–‡è¯­è¨€åŒ…ï¼Œæ”¯æŒä¸­æ–‡èœå•ç•Œé¢
- ğŸ’¾ **å®Œæ•´å¤‡ä»½**: åˆ›å»ºè·¯ç”±å™¨å›ºä»¶çš„å®Œæ•´å¤‡ä»½
- ğŸ”„ **å›ºä»¶åˆ·å†™**: æ”¯æŒè‡ªå®šä¹‰å›ºä»¶çš„å®‰è£…
- âš¡ **Bootloaderæ›¿æ¢**: æ”¯æŒå®‰è£…Breedç­‰ç¬¬ä¸‰æ–¹Bootloader

### é«˜çº§åŠŸèƒ½
- ğŸ“Š **è®¾å¤‡ä¿¡æ¯è¯»å–**: è·å–è¯¦ç»†çš„ç¡¬ä»¶å’Œç³»ç»Ÿä¿¡æ¯
- ğŸ” **å¯†ç ä¿®æ”¹**: ä¿®æ”¹è·¯ç”±å™¨rootå¯†ç 
- ğŸ“‹ **æ—¥å¿—è¯»å–**: è¯»å–ç³»ç»Ÿæ—¥å¿—å’Œå†…æ ¸ä¿¡æ¯
- âš™ï¸ **åˆ†åŒºå¤‡ä»½**: åˆ›å»ºæŒ‡å®šåˆ†åŒºçš„å¤‡ä»½
- ğŸš€ **å¼•å¯¼è®¾ç½®**: è®¾ç½®å†…æ ¸å¼•å¯¼åœ°å€
- ğŸ”§ **åŠŸèƒ½è§£é”**: è§£é”éšè—çš„è·¯ç”±å™¨åŠŸèƒ½

## ğŸš€ å®‰è£…æ•™ç¨‹

### Windows ç”¨æˆ·

1. **ä¸‹è½½å·¥å…·åŒ…**
   ```
   ä¸‹è½½å¹¶è§£å‹é¡¹ç›®æ–‡ä»¶åˆ°ä»»æ„ç›®å½•
   ```

2. **è¿è¡Œå·¥å…·**
   ```
   åŒå‡»è¿è¡Œ run.bat æ–‡ä»¶
   ```

3. **è‡ªåŠ¨ç¯å¢ƒé…ç½®**
   - å·¥å…·ä¼šè‡ªåŠ¨ä½¿ç”¨å†…ç½®çš„ Python ç¯å¢ƒ
   - æ— éœ€æ‰‹åŠ¨å®‰è£… Python æˆ–ä¾èµ–åŒ…

### Linux / macOS ç”¨æˆ·

1. **ç³»ç»Ÿè¦æ±‚**
   ```bash
   # ç¡®ä¿å·²å®‰è£… Python 3.8+ å’Œ OpenSSL
   python3 --version  # åº”æ˜¾ç¤º 3.8 æˆ–æ›´é«˜ç‰ˆæœ¬
   openssl version    # ç¡®è®¤ OpenSSL å·²å®‰è£…
   ```

2. **å®‰è£…ä¾èµ–**
   ```bash
   # Ubuntu/Debian
   sudo apt update
   sudo apt install python3 python3-pip python3-venv openssl
   
   # CentOS/RHEL
   sudo yum install python3 python3-pip openssl
   
   # macOS (ä½¿ç”¨ Homebrew)
   brew install python3 openssl
   ```

3. **ä¸‹è½½å¹¶è¿è¡Œ**
   ```bash
   # ä¸‹è½½é¡¹ç›®
   git clone https://github.com/longzheng268/Xiaomi-Router-patcher.git
   cd Xiaomi-Router-patcher
   
   # è¿è¡Œå·¥å…·
   chmod +x run.sh
   ./run.sh
   ```

### Docker ç”¨æˆ·

```bash
# æ„å»º Docker é•œåƒ
docker build -t xmir-patcher .

# è¿è¡Œå®¹å™¨
docker run -it --network host xmir-patcher
```

## ğŸ“– ä½¿ç”¨æŒ‡å—

### ç¬¬ä¸€æ­¥ï¼šè¿æ¥å‡†å¤‡

1. **ç½‘ç»œè¿æ¥**
   - ç¡®ä¿ç”µè„‘å’Œå°ç±³è·¯ç”±å™¨åœ¨åŒä¸€ç½‘ç»œä¸­
   - è®°å½•è·¯ç”±å™¨çš„IPåœ°å€ï¼ˆé€šå¸¸æ˜¯ 192.168.31.1ï¼‰
   - ç¡®ä¿èƒ½æ­£å¸¸è®¿é—®è·¯ç”±å™¨ç®¡ç†ç•Œé¢

2. **å¯åŠ¨å·¥å…·**
   - Windows: åŒå‡» `run.bat`
   - Linux/macOS: æ‰§è¡Œ `./run.sh`

### ç¬¬äºŒæ­¥ï¼šåŸºæœ¬é…ç½®

è¿è¡Œå·¥å…·åä¼šçœ‹åˆ°ä¸»èœå•ï¼š

```
==========================================================

Xiaomi MiR Patcher  

 1 - Set IP-address (current value: 192.168.31.1)
 2 - Connect to device (install exploit)
 3 - Read full device info
 4 - Create full backup
 5 - Install EN/RU languages
 6 - Install permanent SSH
 7 - Install firmware (from directory "firmware")
 8 - {{{ Other functions }}}
 9 - [[ Reboot device ]]
 0 - Exit

Select:
```

### ç¬¬ä¸‰æ­¥ï¼šæ‰§è¡Œæ“ä½œ

#### å¿…è¦çš„å‰ç½®æ­¥éª¤

1. **è®¾ç½®IPåœ°å€ (é€‰é¡¹1)**
   ```
   é€‰æ‹© 1 â†’ è¾“å…¥è·¯ç”±å™¨IPåœ°å€ â†’ æŒ‰å›è½¦ç¡®è®¤
   ```

2. **è¿æ¥è®¾å¤‡å¹¶å®‰è£…æ¼æ´åˆ©ç”¨ (é€‰é¡¹2)**
   ```
   é€‰æ‹© 2 â†’ å·¥å…·ä¼šè‡ªåŠ¨æ£€æµ‹è®¾å¤‡å‹å·å¹¶å®‰è£…ç›¸åº”çš„æ¼æ´åˆ©ç”¨ç¨‹åº
   ```
   
   > âš ï¸ **é‡è¦**: è¿™æ˜¯æ‰€æœ‰åç»­æ“ä½œçš„å‰æï¼Œå¿…é¡»å…ˆæˆåŠŸæ‰§è¡Œæ­¤æ­¥éª¤ï¼

#### å¸¸ç”¨æ“ä½œæµç¨‹

1. **å®Œæ•´å¤‡ä»½ (æ¨èé¦–å…ˆæ‰§è¡Œ)**
   ```
   é€‰æ‹© 4 â†’ å·¥å…·ä¼šåˆ›å»ºå®Œæ•´çš„å›ºä»¶å¤‡ä»½ï¼Œä¿å­˜åœ¨ backup ç›®å½•ä¸­
   ```

2. **å¯ç”¨SSHè®¿é—®**
   ```
   é€‰æ‹© 6 â†’ å·¥å…·ä¼šæ°¸ä¹…å¯ç”¨SSHè®¿é—®ï¼Œé»˜è®¤ç”¨æˆ·å/å¯†ç : root/root
   ```

3. **å®‰è£…è¯­è¨€åŒ…**
   ```
   é€‰æ‹© 5 â†’ å®‰è£…è‹±æ–‡/ä¿„æ–‡/ä¸­æ–‡è¯­è¨€åŒ…ï¼Œè®©è·¯ç”±å™¨ç•Œé¢æ”¯æŒæ›´å¤šè¯­è¨€
   ```

#### è¯­è¨€ç•Œé¢è®¾ç½®

é¦–æ¬¡å¯åŠ¨å·¥å…·æ—¶ï¼Œä¼šæ˜¾ç¤ºè¯­è¨€é€‰æ‹©èœå•ï¼š
```
Language / è¯­è¨€ / Ğ¯Ğ·Ñ‹Ğº

 1 - English
 2 - ä¸­æ–‡ (Chinese)  
 3 - Ğ ÑƒÑÑĞºĞ¸Ğ¹ (Russian)

Select language [1-English, 2-ä¸­æ–‡, 3-Ğ ÑƒÑÑĞºĞ¸Ğ¹]: 
```

é€‰æ‹©å¯¹åº”æ•°å­—å³å¯åˆ‡æ¢åˆ°ç›¸åº”è¯­è¨€çš„èœå•ç•Œé¢ã€‚è¯­è¨€è®¾ç½®ä¼šä¿å­˜åœ¨ `config.json` æ–‡ä»¶ä¸­ã€‚

**ä¸­æ–‡ç•Œé¢é¢„è§ˆ**:
```
==========================================================

å°ç±³è·¯ç”±å™¨ç ´è§£å·¥å…·  

 1 - è®¾ç½®IPåœ°å€ (å½“å‰å€¼: 192.168.31.1)
 2 - è¿æ¥è®¾å¤‡ (å®‰è£…æ¼æ´åˆ©ç”¨)
 3 - è¯»å–å®Œæ•´è®¾å¤‡ä¿¡æ¯
 4 - åˆ›å»ºå®Œæ•´å¤‡ä»½
 5 - å®‰è£… è‹±æ–‡/ä¿„æ–‡/ä¸­æ–‡ è¯­è¨€åŒ…
 6 - å®‰è£…æ°¸ä¹…SSH
 7 - å®‰è£…å›ºä»¶ (ä» "firmware" ç›®å½•)
 8 - {{{ å…¶ä»–åŠŸèƒ½ }}}
 9 - [[ é‡å¯è®¾å¤‡ ]]
 0 - é€€å‡º

è¯·é€‰æ‹©: 
```

## ğŸ” è¯¦ç»†åŠŸèƒ½è¯´æ˜

### ä¸»èœå•åŠŸèƒ½

#### 1. è®¾ç½®IPåœ°å€
- **ç”¨é€”**: è®¾ç½®ç›®æ ‡è·¯ç”±å™¨çš„IPåœ°å€
- **é»˜è®¤å€¼**: 192.168.31.1
- **ä½¿ç”¨åœºæ™¯**: å½“è·¯ç”±å™¨IPä¸æ˜¯é»˜è®¤å€¼æ—¶éœ€è¦ä¿®æ”¹

#### 2. è¿æ¥è®¾å¤‡ï¼ˆå®‰è£…æ¼æ´åˆ©ç”¨ï¼‰
- **ç”¨é€”**: æ£€æµ‹è®¾å¤‡å‹å·å¹¶å®‰è£…å¯¹åº”çš„æ¼æ´åˆ©ç”¨ç¨‹åº
- **æ”¯æŒçš„æ¼æ´**:
  - `c_upload/netspeed` - é€‚ç”¨äºè¾ƒè€å‹å·
  - `get_icon` - é€‚ç”¨äºè¾ƒæ–°å‹å·
- **æ‰§è¡Œè¿‡ç¨‹**:
  1. è‡ªåŠ¨æ£€æµ‹è·¯ç”±å™¨å‹å·
  2. é€‰æ‹©åˆé€‚çš„æ¼æ´åˆ©ç”¨æ–¹æ³•
  3. ä¸Šä¼ å¹¶æ‰§è¡Œæ¼æ´åˆ©ç”¨ä»£ç 
  4. å¯ç”¨SSHå’ŒTelnetè®¿é—®

#### 3. è¯»å–å®Œæ•´è®¾å¤‡ä¿¡æ¯
- **è·å–ä¿¡æ¯åŒ…æ‹¬**:
  - ç¡¬ä»¶å‹å·å’Œç‰ˆæœ¬
  - å›ºä»¶ç‰ˆæœ¬ä¿¡æ¯
  - åˆ†åŒºè¡¨ç»“æ„
  - å†…å­˜å’Œå­˜å‚¨ä¿¡æ¯
  - ç½‘ç»œé…ç½®
- **è¾“å‡ºä½ç½®**: `outdir/` ç›®å½•

#### 4. åˆ›å»ºå®Œæ•´å¤‡ä»½
- **å¤‡ä»½å†…å®¹**:
  - æ‰€æœ‰åˆ†åŒºçš„åŸå§‹æ•°æ®
  - Bootloader
  - å†…æ ¸é•œåƒ
  - æ ¹æ–‡ä»¶ç³»ç»Ÿ
  - é…ç½®æ•°æ®
- **å¤‡ä»½æ ¼å¼**: äºŒè¿›åˆ¶é•œåƒæ–‡ä»¶
- **å­˜å‚¨ä½ç½®**: `backup/` ç›®å½•

#### #### 5. å®‰è£…å¤šè¯­è¨€åŒ…

**è¯­è¨€åŒ…åŠŸèƒ½è¯¦è§£**

**æ”¯æŒçš„è¯­è¨€**:
- **è‹±æ–‡ (English)**: å®Œæ•´çš„è‹±æ–‡ç•Œé¢å’Œè¯­è¨€åŒ…
- **ä¸­æ–‡ (Chinese)**: å®Œæ•´çš„ä¸­æ–‡ç•Œé¢å’Œè¯­è¨€åŒ…  
- **ä¿„æ–‡ (Russian)**: å®Œæ•´çš„ä¿„æ–‡ç•Œé¢å’Œè¯­è¨€åŒ…

**åŠŸèƒ½ç‰¹ç‚¹**:
- ğŸŒ **æ™ºèƒ½è¯­è¨€é€‰æ‹©**: é¦–æ¬¡è¿è¡Œè‡ªåŠ¨æ˜¾ç¤ºè¯­è¨€é€‰æ‹©èœå•
- ğŸ’¾ **æŒä¹…åŒ–é…ç½®**: è¯­è¨€é€‰æ‹©ä¿å­˜åœ¨ `config.json` ä¸­ï¼Œä¸‹æ¬¡å¯åŠ¨è‡ªåŠ¨åº”ç”¨
- ğŸ”„ **å®æ—¶åˆ‡æ¢**: å¯é€šè¿‡é‡æ–°è¿è¡Œç¨‹åºåˆ‡æ¢è¯­è¨€
- ğŸ“± **å®Œæ•´æœ¬åœ°åŒ–**: åŒ…æ‹¬èœå•ã€æç¤ºä¿¡æ¯ã€é”™è¯¯æ¶ˆæ¯ç­‰å…¨é¢æœ¬åœ°åŒ–
- ğŸ¯ **è·¯ç”±å™¨è¯­è¨€åŒ…**: æ”¯æŒä¸ºè·¯ç”±å™¨å®‰è£…å¯¹åº”çš„è¯­è¨€åŒ…æ–‡ä»¶

**å®‰è£…æ–¹å¼**: 
1. ä¸Šä¼ è¯­è¨€æ–‡ä»¶åˆ°è·¯ç”±å™¨
2. ä¿®æ”¹ç³»ç»Ÿé…ç½®
3. é‡å¯ç›¸å…³æœåŠ¡
4. **å¸è½½**: é€šè¿‡æ‰©å±•èœå•é€‰é¡¹5å¯ä»¥å¸è½½

**æŠ€æœ¯å®ç°**:
- ä½¿ç”¨ UTF-8 ç¼–ç æ”¯æŒå¤šè¯­è¨€å­—ç¬¦æ˜¾ç¤º
- Windows æ‰¹å¤„ç†æ–‡ä»¶ä½¿ç”¨ `chcp 65001` æ”¯æŒä¸­æ–‡æ˜¾ç¤º
- æ¨¡å—åŒ–ç¿»è¯‘ç³»ç»Ÿï¼Œæ˜“äºæ‰©å±•æ–°è¯­è¨€
- åŸºäº `.po` æ ¼å¼çš„æ ‡å‡†åŒ–è¯­è¨€åŒ…ç®¡ç†

#### 6. å®‰è£…æ°¸ä¹…SSH
- **åŠŸèƒ½**: å¯ç”¨æŒä¹…åŒ–çš„SSHè®¿é—®
- **é»˜è®¤å‡­æ®**: 
  - ç”¨æˆ·å: `root`
  - å¯†ç : `root`
- **ç«¯å£**: 22
- **ç‰¹ç‚¹**: é‡å¯åä»ç„¶æœ‰æ•ˆ

#### 7. å®‰è£…å›ºä»¶
- **æ”¯æŒæ ¼å¼**: 
  - æ ‡å‡†çš„å°ç±³å›ºä»¶æ ¼å¼
  - OpenWrtå›ºä»¶ï¼ˆéœ€å…¼å®¹ï¼‰
- **å›ºä»¶ä½ç½®**: å°†å›ºä»¶æ”¾åœ¨ `firmware/` ç›®å½•
- **å®‰è£…è¿‡ç¨‹**: è‡ªåŠ¨åŒ–åˆ·å†™æµç¨‹

#### 8. å…¶ä»–åŠŸèƒ½ï¼ˆæ‰©å±•èœå•ï¼‰
è¿›å…¥æ‰©å±•åŠŸèƒ½èœå•ï¼ŒåŒ…å«æ›´å¤šé«˜çº§é€‰é¡¹ã€‚

#### 9. é‡å¯è®¾å¤‡
å®‰å…¨é‡å¯è·¯ç”±å™¨è®¾å¤‡ã€‚

### æ‰©å±•èœå•åŠŸèƒ½

#### 1. è®¾ç½®IPåœ°å€
ä¸ä¸»èœå•åŠŸèƒ½1ç›¸åŒã€‚

#### 2. ä¿®æ”¹rootå¯†ç 
- **ç”¨é€”**: ä¿®æ”¹è·¯ç”±å™¨çš„rootç”¨æˆ·å¯†ç 
- **å®‰å…¨æ€§**: æé«˜ç³»ç»Ÿå®‰å…¨æ€§

#### 3. è¯»å–dmesgå’Œsyslog
- **è·å–å†…å®¹**:
  - å†…æ ¸æ—¥å¿— (dmesg)
  - ç³»ç»Ÿæ—¥å¿— (syslog)
- **ç”¨é€”**: æ•…éšœè¯Šæ–­å’Œç³»ç»Ÿåˆ†æ

#### 4. åˆ›å»ºæŒ‡å®šåˆ†åŒºå¤‡ä»½
- **çµæ´»æ€§**: å¯é€‰æ‹©å¤‡ä»½ç‰¹å®šåˆ†åŒº
- **å¸¸ç”¨åˆ†åŒº**:
  - `bootloader` - å¼•å¯¼åŠ è½½å™¨
  - `kernel` - å†…æ ¸
  - `rootfs` - æ ¹æ–‡ä»¶ç³»ç»Ÿ
  - `overlay` - é…ç½®æ•°æ®

#### 5. å¸è½½è‹±æ–‡/ä¿„æ–‡è¯­è¨€åŒ…
è¿˜åŸåˆ°åŸå§‹çš„ä¸­æ–‡ç•Œé¢ã€‚

#### 6. è®¾ç½®å†…æ ¸å¼•å¯¼åœ°å€
- **ç”¨é€”**: ä¿®æ”¹å†…æ ¸çš„åŠ è½½åœ°å€
- **åº”ç”¨åœºæ™¯**: å®‰è£…è‡ªå®šä¹‰å›ºä»¶æ—¶ä½¿ç”¨

#### 7. å®‰è£…Breedå¼•å¯¼åŠ è½½å™¨
- **Breedç‰¹ç‚¹**:
  - åŠŸèƒ½å¼ºå¤§çš„ç¬¬ä¸‰æ–¹Bootloader
  - æ”¯æŒWebç•Œé¢å›ºä»¶åˆ·å†™
  - ä¸æ€•åˆ·åï¼ˆå˜ç –ä¿æŠ¤ï¼‰
- **æ”¯æŒå‹å·**: 
  - R3G, R3P, RM2100, RA71: `breed_r3g_eng.bin`
  - CR6606, CR6608, CR6609, TR608, TR609: `pb-boot-cr660x.img`
- **å®‰è£…å‘½ä»¤**: `python3 install_bl.py breed`

#### 7a. å®‰è£…åŸå‚U-Bootå¼•å¯¼åŠ è½½å™¨
- **U-Bootç‰¹ç‚¹**:
  - è®¾å¤‡åŸå‚Bootloader
  - è®¾å¤‡ç‰¹å®šçš„å¼•å¯¼ç¨‹åº
  - ç”¨äºæ¢å¤åŸå‚å¼•å¯¼ç¯å¢ƒ
- **æ”¯æŒå‹å·**: 
  - R3G: `uboot_r3g.bin`
  - R3P: `uboot_r3p.bin`
  - RM2100: `uboot_rm2100.bin`
- **å®‰è£…å‘½ä»¤**: `python3 install_bl.py uboot`

#### 8. æµ‹è¯•åŠŸèƒ½
å¼€å‘å’Œè°ƒè¯•ç”¨é€”çš„æµ‹è¯•åŠŸèƒ½ã€‚

#### 9. é‡å¯è®¾å¤‡
ä¸ä¸»èœå•åŠŸèƒ½9ç›¸åŒã€‚

## ğŸ› ï¸ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. è¿æ¥å¤±è´¥
**é—®é¢˜**: æ— æ³•è¿æ¥åˆ°è·¯ç”±å™¨
**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ£€æŸ¥ç½‘ç»œè¿æ¥
ping 192.168.31.1

# æ£€æŸ¥è·¯ç”±å™¨ç®¡ç†ç•Œé¢
curl -I http://192.168.31.1

# ç¡®è®¤IPåœ°å€æ­£ç¡®
# æŸäº›è·¯ç”±å™¨å¯èƒ½ä½¿ç”¨ 192.168.1.1
```

#### 2. æ¼æ´åˆ©ç”¨å¤±è´¥
**é—®é¢˜**: "Exploit not working" é”™è¯¯
**å¯èƒ½åŸå› **:
- å›ºä»¶ç‰ˆæœ¬å¤ªæ–°ï¼Œå·²ä¿®å¤æ¼æ´
- è·¯ç”±å™¨å‹å·ä¸æ”¯æŒ
- ç½‘ç»œè¿æ¥ä¸ç¨³å®š

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ£€æŸ¥è®¾å¤‡å‹å·æ”¯æŒæƒ…å†µ
# å°è¯•é™çº§å›ºä»¶ï¼ˆå¦‚æœå¯èƒ½ï¼‰
# æ£€æŸ¥ç½‘ç»œè¿æ¥ç¨³å®šæ€§
```

#### 2.1 é«˜å®‰å…¨æ€§è®¾å¤‡ (hackCheck >= 3)
**é—®é¢˜**: å‡ºç° "hackCheck version = 3" è­¦å‘Šï¼Œæ‰€æœ‰æ¼æ´åˆ©ç”¨å¤±è´¥
**é€‚ç”¨è®¾å¤‡**: BE3600 2.5G (RD15)ã€BE6500 Pro ç­‰æ–°æ¬¾è®¾å¤‡
**è§£å†³æ–¹æ¡ˆ**: 
- âœ… **è‡ªåŠ¨å¤„ç†**: å·¥å…·å·²å†…ç½® hackCheck=3 ç»•è¿‡æŠ€æœ¯
- ä½¿ç”¨å¤šç§å­—ç¬¦è¿‡æ»¤ç»•è¿‡æ–¹æ³•ï¼šOctalç¼–ç ã€Base64ç¼–ç ã€å­—ç¬¦æ›¿æ¢
- å¦‚ä»ç„¶å¤±è´¥ï¼Œå¯èƒ½éœ€è¦ï¼š
  ```bash
  # 1. å°è¯•é™çº§å›ºä»¶åˆ°è¾ƒæ—©ç‰ˆæœ¬
  # 2. ä½¿ç”¨ç¡¬ä»¶è°ƒè¯•æ¥å£ (UART/JTAG)
  # 3. ç­‰å¾…æ–°çš„æ¼æ´å‘ç°
  ```

**æŠ€æœ¯è¯´æ˜**: hackCheck=3 è¿‡æ»¤å­—ç¬¦: `= [ \n \` ; | $ &`
å·¥å…·ä½¿ç”¨ä¸‰ç§ç»•è¿‡æŠ€æœ¯ï¼š
- **Printfå…«è¿›åˆ¶ç¼–ç **: `printf "cmd\073more" | sh` 
- **Base64ç¼–ç **: `echo Y21kO21vcmU= | base64 -d | sh`
- **å­—ç¬¦æ›¿æ¢**: `echo "cmdSmire" | tr "S" ";" | sh`

#### 3. SSHè¿æ¥é—®é¢˜
**é—®é¢˜**: SSHè¿æ¥è¢«æ‹’ç»
**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ£€æŸ¥SSHæœåŠ¡çŠ¶æ€
ssh root@192.168.31.1

# å¦‚æœè¿æ¥è¢«æ‹’ç»ï¼Œé‡æ–°æ‰§è¡Œé€‰é¡¹6
# æ£€æŸ¥é˜²ç«å¢™è®¾ç½®
```

#### 4. å›ºä»¶åˆ·å†™å¤±è´¥
**é—®é¢˜**: å›ºä»¶å®‰è£…è¿‡ç¨‹ä¸­å‡ºé”™
**è§£å†³æ–¹æ¡ˆ**:
- ç¡®ä¿å›ºä»¶ä¸è®¾å¤‡å‹å·åŒ¹é…
- æ£€æŸ¥å›ºä»¶æ–‡ä»¶å®Œæ•´æ€§
- ç¡®ä¿æœ‰è¶³å¤Ÿçš„å­˜å‚¨ç©ºé—´
- æ£€æŸ¥ç”µæºç¨³å®šæ€§

#### 5. Pythonä¾èµ–é—®é¢˜
**é—®é¢˜**: ModuleNotFoundError
**è§£å†³æ–¹æ¡ˆ**:
```bash
# é‡æ–°å®‰è£…ä¾èµ–
pip install -r requirements.txt

# æˆ–è€…ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒ
python3 -m venv venv
source venv/bin/activate  # Linux/macOS
# venv\Scripts\activate   # Windows
pip install -r requirements.txt
```

### æ¢å¤æ¨¡å¼

å¦‚æœè·¯ç”±å™¨å˜ç –ï¼Œå¯ä»¥å°è¯•ä»¥ä¸‹æ¢å¤æ–¹æ³•ï¼š

#### 1. ä½¿ç”¨Breedæ¢å¤ï¼ˆå¦‚å·²å®‰è£…ï¼‰
1. è·¯ç”±å™¨æ–­ç”µ
2. æŒ‰ä½reseté”®ä¸æ”¾
3. æ’å…¥ç”µæºï¼Œç­‰å¾…10ç§’
4. æµè§ˆå™¨è®¿é—® `192.168.1.1`
5. é€šè¿‡Webç•Œé¢åˆ·å†™å›ºä»¶

#### 2. ä½¿ç”¨å¤‡ä»½æ¢å¤
1. é€šè¿‡SSHè¿æ¥åˆ°è·¯ç”±å™¨
2. ä½¿ç”¨ddå‘½ä»¤æ¢å¤åˆ†åŒºï¼š
```bash
# æ¢å¤å®Œæ•´å›ºä»¶ï¼ˆè°¨æ…æ“ä½œï¼ï¼‰
dd if=/tmp/backup.bin of=/dev/mtdblock0

# æ¢å¤ç‰¹å®šåˆ†åŒº
dd if=/tmp/kernel_backup.bin of=/dev/mtdblock2
```

#### 3. TFTPæ¢å¤æ¨¡å¼
æŸäº›å‹å·æ”¯æŒTFTPæ¢å¤ï¼š
1. è®¾ç½®ç”µè„‘IPä¸º 192.168.1.2
2. è¿è¡ŒTFTPæœåŠ¡å™¨
3. æŒ‰ä½reseté”®å¯åŠ¨è·¯ç”±å™¨
4. ä¼ è¾“å›ºä»¶æ–‡ä»¶

## âš ï¸ å®‰å…¨æç¤º

### é£é™©å£°æ˜
- **âš ï¸ åˆ·æœºæœ‰é£é™©ï¼Œæ“ä½œéœ€è°¨æ…ï¼**
- **âš ï¸ ä»»ä½•å›ºä»¶ä¿®æ”¹éƒ½å¯èƒ½å¯¼è‡´è®¾å¤‡å˜ç –ï¼**
- **âš ï¸ ä¿®æ”¹å›ºä»¶å¯èƒ½å¤±å»å®˜æ–¹ä¿ä¿®ï¼**
- **âš ï¸ è¯·åœ¨æ“ä½œå‰åšå¥½å®Œæ•´å¤‡ä»½ï¼**

### å®‰å…¨å»ºè®®

#### æ“ä½œå‰å‡†å¤‡
1. **å®Œæ•´å¤‡ä»½**: åŠ¡å¿…å…ˆæ‰§è¡Œé€‰é¡¹4åˆ›å»ºå®Œæ•´å¤‡ä»½
2. **ç¨³å®šç”µæº**: ç¡®ä¿æ“ä½œè¿‡ç¨‹ä¸­ç”µæºç¨³å®š
3. **ç½‘ç»œç¨³å®š**: ç¡®ä¿ç½‘ç»œè¿æ¥ç¨³å®š
4. **å……è¶³æ—¶é—´**: ä¸è¦åœ¨æ—¶é—´ç´§è¿«æ—¶è¿›è¡Œæ“ä½œ

#### å¯†ç å®‰å…¨
1. **ä¿®æ”¹é»˜è®¤å¯†ç **: SSHå¯ç”¨åç«‹å³ä¿®æ”¹é»˜è®¤å¯†ç 
```bash
passwd root
```

2. **ç¦ç”¨ä¸å¿…è¦çš„æœåŠ¡**:
```bash
# å¦‚ä¸éœ€è¦Telnetï¼Œå»ºè®®ç¦ç”¨
/etc/init.d/telnet disable
```

3. **é…ç½®é˜²ç«å¢™**:
```bash
# é™åˆ¶SSHè®¿é—®çš„IPèŒƒå›´
iptables -A INPUT -p tcp --dport 22 -s 192.168.31.0/24 -j ACCEPT
iptables -A INPUT -p tcp --dport 22 -j DROP
```

#### å›ºä»¶å®‰å…¨
1. **éªŒè¯å›ºä»¶æ¥æº**: åªä½¿ç”¨å¯ä¿¡æ¥æºçš„å›ºä»¶
2. **æ ¡éªŒæ–‡ä»¶å®Œæ•´æ€§**: ä½¿ç”¨MD5æˆ–SHA256æ ¡éªŒ
3. **æ¸è¿›å¼å‡çº§**: é¿å…è·¨è¶Šå¤ªå¤šç‰ˆæœ¬å‡çº§

## ğŸ”§ å¼€å‘è¯´æ˜

### é¡¹ç›®ç»“æ„
```
Xiaomi-Router-patcher/
â”œâ”€â”€ menu.py              # ä¸»èœå•ç•Œé¢
â”œâ”€â”€ gateway.py           # ç½‘å…³é€šä¿¡æ¨¡å—
â”œâ”€â”€ connect*.py          # å„ç§æ¼æ´åˆ©ç”¨è„šæœ¬
â”œâ”€â”€ xqmodel.py           # è®¾å¤‡å‹å·å®šä¹‰
â”œâ”€â”€ read_info.py         # è®¾å¤‡ä¿¡æ¯è¯»å–
â”œâ”€â”€ create_backup.py     # å¤‡ä»½åŠŸèƒ½
â”œâ”€â”€ install_*.py         # å„ç§å®‰è£…åŠŸèƒ½
â”œâ”€â”€ unlock_features.py   # åŠŸèƒ½è§£é”
â”œâ”€â”€ xmir_base/           # æ ¸å¿ƒåº“
â”‚   â”œâ”€â”€ ubireader/       # UBIæ–‡ä»¶ç³»ç»Ÿè¯»å–
â”‚   â”œâ”€â”€ fdt/             # è®¾å¤‡æ ‘å¤„ç†
â”‚   â””â”€â”€ telnetlib/       # Telnetåº“
â”œâ”€â”€ data/                # æ•°æ®æ–‡ä»¶
â”‚   â”œâ”€â”€ payload/         # æ¼æ´åˆ©ç”¨è½½è·
â”‚   â”œâ”€â”€ payload_ssh/     # SSHç›¸å…³è„šæœ¬
â”‚   â””â”€â”€ *.po             # è¯­è¨€åŒ…æ–‡ä»¶
â”œâ”€â”€ bootloader/          # å¼•å¯¼åŠ è½½å™¨æ–‡ä»¶
â”œâ”€â”€ firmware/            # å›ºä»¶å­˜æ”¾ç›®å½•
â””â”€â”€ python/              # Windowså†…ç½®Python
```

### æ ¸å¿ƒæ¨¡å—è¯´æ˜

#### Gatewayç±» (gateway.py)
è´Ÿè´£ä¸è·¯ç”±å™¨çš„é€šä¿¡ï¼ŒåŒ…æ‹¬ï¼š
- HTTP/HTTPSè¯·æ±‚
- SSHè¿æ¥
- Telnetè¿æ¥
- FTPä¼ è¾“
- è®¾å¤‡æ£€æµ‹

#### æ¼æ´åˆ©ç”¨æ¨¡å— (connect*.py)
- `connect1.py`: c_upload/netspeedæ¼æ´
- `connect7.py`: get_iconæ¼æ´
- æ”¯æŒå¤šç§å°ç±³è·¯ç”±å™¨å‹å·

#### è®¾å¤‡æ¨¡å‹ (xqmodel.py)
å®šä¹‰äº†æ‰€æœ‰æ”¯æŒçš„è®¾å¤‡å‹å·å’Œå±æ€§ã€‚

### æ·»åŠ æ–°è®¾å¤‡æ”¯æŒ

1. **åœ¨xqmodel.pyä¸­æ·»åŠ è®¾å¤‡å®šä¹‰**:
```python
mi(42, "NEW_MODEL", "", "device-alt-name")
```

2. **åœ¨connect.pyä¸­æ·»åŠ æ£€æµ‹é€»è¾‘**:
```python
if gw.model_id == get_modelid_by_name('NEW_MODEL'):
    # ä½¿ç”¨é€‚å½“çš„æ¼æ´åˆ©ç”¨æ–¹æ³•
```

3. **æµ‹è¯•æ–°è®¾å¤‡**:
```python
# åˆ›å»ºæµ‹è¯•è„šæœ¬éªŒè¯åŠŸèƒ½
```

### è‡ªå®šä¹‰æ¼æ´åˆ©ç”¨

å‚è€ƒç°æœ‰çš„connectè„šæœ¬ï¼Œä¸»è¦æ­¥éª¤ï¼š

1. **æ£€æµ‹è®¾å¤‡**:
```python
gw.detect_device()
```

2. **å®‰è£…è½½è·**:
```python
install_exploit(api='API/endpoint')
```

3. **æ‰§è¡ŒåŠŸèƒ½**:
```python
run_exploit('function_name', timeout=10)
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

### å¦‚ä½•è´¡çŒ®

1. **Fork é¡¹ç›®**
2. **åˆ›å»ºåŠŸèƒ½åˆ†æ”¯**:
```bash
git checkout -b feature/new-feature
```

3. **æäº¤æ›´æ”¹**:
```bash
git commit -am 'Add new feature'
```

4. **æ¨é€åˆ†æ”¯**:
```bash
git push origin feature/new-feature
```

5. **åˆ›å»º Pull Request**

### è´¡çŒ®æ–¹å‘

- æ”¯æŒæ–°çš„è·¯ç”±å™¨å‹å·
- ä¿®å¤ç°æœ‰æ¼æ´åˆ©ç”¨
- æ”¹è¿›ç”¨æˆ·ç•Œé¢
- å¢åŠ æ–°åŠŸèƒ½
- å®Œå–„æ–‡æ¡£
- ä¿®å¤bug

### ä»£ç è§„èŒƒ

- ä½¿ç”¨Python 3.8+è¯­æ³•
- éµå¾ªPEP 8ä»£ç é£æ ¼
- æ·»åŠ é€‚å½“çš„æ³¨é‡Š
- ç¼–å†™æµ‹è¯•ç”¨ä¾‹

### æŠ¥å‘Šé—®é¢˜

è¯·åœ¨GitHub Issuesä¸­æŠ¥å‘Šbugæˆ–æå‡ºåŠŸèƒ½è¯·æ±‚ï¼š
- è¯¦ç»†æè¿°é—®é¢˜
- æä¾›å¤ç°æ­¥éª¤
- åŒ…å«ç³»ç»Ÿç¯å¢ƒä¿¡æ¯
- é™„ä¸Šç›¸å…³æ—¥å¿—

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ GPL-3.0 è®¸å¯è¯ã€‚è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## ğŸ’ æèµ æ”¯æŒ

å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œæ¬¢è¿æ”¯æŒå¼€å‘ï¼š

[![Donations Page](https://github.com/andry81-cache/gh-content-static-cache/raw/master/common/badges/donate/donate.svg)](https://github.com/remittor/donate)

## ğŸ“ è”ç³»æ–¹å¼

- **GitHub Issues**: [æäº¤é—®é¢˜](https://github.com/longzheng268/Xiaomi-Router-patcher/issues)
- **è®¨è®ºåŒº**: [GitHub Discussions](https://github.com/longzheng268/Xiaomi-Router-patcher/discussions)

## ğŸ™ è‡´è°¢

- æ„Ÿè°¢åŸå§‹é¡¹ç›®çš„æ‰€æœ‰è´¡çŒ®è€…
- æ„Ÿè°¢å°ç±³è·¯ç”±å™¨ç ´è§£ç¤¾åŒº
- æ„Ÿè°¢OpenWrté¡¹ç›®
- æ„Ÿè°¢æ‰€æœ‰æµ‹è¯•ç”¨æˆ·çš„åé¦ˆ

---

**âš ï¸ å…è´£å£°æ˜**: æœ¬å·¥å…·ä»…ä¾›å­¦ä¹ å’Œç ”ç©¶ä½¿ç”¨ã€‚ä½¿ç”¨æœ¬å·¥å…·è¿›è¡Œçš„ä»»ä½•æ“ä½œï¼Œé£é™©ç”±ç”¨æˆ·è‡ªè¡Œæ‰¿æ‹…ã€‚å¼€å‘è€…ä¸å¯¹å› ä½¿ç”¨æœ¬å·¥å…·è€Œé€ æˆçš„ä»»ä½•æŸå¤±è´Ÿè´£ã€‚

## ğŸ–¼ï¸ ç•Œé¢å±•ç¤º / Interface Preview

![æˆåŠŸæ‰§è¡Œç•Œé¢](image/display-successful.png)
*å·¥å…·æˆåŠŸæ‰§è¡Œåçš„ç•Œé¢å±•ç¤º / Interface after successful execution*
![æˆåŠŸè¿æ¥sshç•Œé¢](image/display-ssh.png)
*sshæˆåŠŸæ‰§è¡Œåçš„ç•Œé¢å±•ç¤º / Interface after ssh connetct successful execution*
![æˆåŠŸæŒä¹…åŒ–sshç•Œé¢](image/display-permanent-ssh.png)
*sshæˆåŠŸæ‰§è¡Œåçš„ç•Œé¢å±•ç¤º / Interface after ssh permanent execution*

---

## English Summary

**XMiR-Patcher** is a comprehensive firmware patcher for Xiaomi routers that supports:

- **50+ Xiaomi router models** from R1CM to latest AX series
- **Exploit installation** for gaining root access
- **Permanent SSH access** with customizable credentials  
- **Full firmware backup** and selective partition backup
- **Custom firmware installation** including OpenWrt support
- **Bootloader replacement** (Breed support for R3G/R3P/RM2100/RA71/CR660x/TR60x series, U-Boot support for R3G/R3P/RM2100)
- **Multi-language support** (EN/RU/ZH language packs with Chinese menu interface)
- **Advanced features** like password change, log reading, feature unlocking

### Quick Start
**Windows**: Run `run.bat` | **Linux/macOS**: Run `./run.sh`

### Basic Usage Flow
1. Set router IP address (default: 192.168.31.1)
2. Connect and install exploit (essential first step)
3. Create full backup (highly recommended)
4. Enable permanent SSH access
5. Install custom firmware or additional features

**âš ï¸ Warning**: Firmware modification carries risks. Always backup before proceeding!
